function changeSelected(){document.getElementById("body_selectedfields").value="";var n=document.getElementById("body_fields").value.split(";");for(i=1;i<n.length;i++)document.getElementById("body_"+n[i]).checked&&(document.getElementById("body_selectedfields").value+=";"+n[i])}typeof Array.prototype.remove=="undefined"&&(Array.prototype.remove=function(n){for(var t=0;t<this.length;t++)this[t]==n&&this.splice(t,1)});typeof Array.prototype.contains=="undefined"&&(Array.prototype.contains=function(n){for(var t=0;t<this.length;t++)if(this[t]==n)return!0;return!1});$(document).ready(function(){function n(n){return(n?n+"":"").match(/^https:\/\/([a-z]+).borger.dk\//)!=null}$(".borgerDkPanel").each(function(t,i){function v(n,t){t.is(":visible")?(n.text("Vis dette indhold"),n.closest("li").removeClass("expanded"),t.slideUp(500)):(n.text("Skjul dette indhold"),n.closest("li").addClass("expanded"),t.slideDown(500))}function p(n,t){t=t===!1?!1:!0;c.show();l.html("");o.hide();y.hide();a.hide();$.getJSON("/base/BorgerDk/GetArticle.aspx",{url:n,cache:t,municipalityId:k},function(t){g(t,h,n)})}function g(n){var i,t,e;n.meta.code==200?($(".borgerDkArticleId",o).text(n.data.id),$(".borgerDkArticlePublished",o).text(n.data.published),$(".borgerDkArticleUpdated",o).text(n.data.modified),i=0,t=$('<ul class="borgerDkContentList"/>').appendTo(l),$('<li class="borgerDkListHeader"><span>Vælg<\/span><span>Beskrivelse<\/span><\/li>').appendTo(t),$.each(n.data.elements,function(n,r){var l,o,c;if(s.contains(r.type)||b.contains(r.type)){if(r.type=="title"){var e=$("<li/>").appendTo(t),h=$('<input id="'+r.id+"_Data"+u+'" type="checkbox" />').attr("checked",f.contains(r.id)).appendTo(e),a=$('<label for="'+r.id+"_Data"+u+'">'+r.content+' <span class="borgerDkItemClass">(overskrift)<\/span><\/label>').appendTo(e);s.contains(r.type)&&h.attr("checked",!0).attr("disabled",!0)}else if(r.type=="header"){var e=$("<li/>").appendTo(t),h=$('<input id="'+r.id+"_Data"+u+'" type="checkbox" />').attr("checked",f.contains(r.id)).appendTo(e),a=$('<label for="'+r.id+"_Data"+u+'">'+(r.content.length>50?r.content.substring(0,50)+"...":r.content)+' <span class="borgerDkItemClass">(manchet)<\/span><\/label>').appendTo(e),o=$('<a class="borgerDkItemTrigger" href="#">Vis dette indhold<\/a>').appendTo(e),c=$("<div/>").addClass("borgerDkItemContent").html(r.content?r.content:"").appendTo(e);o.click(function(){return v(o,c),!1});s.contains(r.type)&&h.attr("checked",!0).attr("disabled",!0)}else if(r.type=="kernetekst"){var e=$("<li/>").appendTo(t),h=$('<input id="'+r.id+"_Data"+u+'" type="checkbox" />').attr("checked",f.contains(r.id)).appendTo(e),a=$('<label for="'+r.id+"_Data"+u+'">'+r.text+"<\/label>").appendTo(e);$("input:checkbox",e).change(function(){var n=$(this).is(":checked");$("ul input:checkbox",e).attr("checked",n)});s.contains(r.type)&&h.attr("checked",!0).attr("disabled",!0);l=$('<ul class="borgerDkSubContentList"/>').appendTo(e);$.each(r.content,function(n,t){var i=$("<li/>").appendTo(l),h=$('<input id="microArticle-'+t.id+"_Data"+u+'" type="checkbox" />').attr("checked",f.contains(r.id)||f.contains("microArticle-"+t.id)).appendTo(i),o;$('<label for="microArticle-'+t.id+"_Data"+u+'">'+t.text+' <span class="borgerDkItemClass">(mikroartikel)<\/span><\/label>').appendTo(i);$("label",i).append('<a class="borgerDkItemTrigger" href="#">Vis dette indhold<\/a>');o=$("<div/>").addClass("borgerDkItemContent").html(t.content).appendTo(i);$("label a",i).click(function(){return v($(this),o),!1});s.contains(r.type)&&h.attr("checked",!0).attr("disabled",!0);$("input:checkbox",i).change(function(){var n=!0;$("ul input:checkbox",e).each(function(t,i){$(i).is(":checked")||(n=!1)});n||$(">input:checkbox",e).attr("checked",!1)})})}else{var e=$("<li/>").appendTo(t),h=$('<input id="'+r.id+"_Data"+u+'" type="checkbox" />').attr("checked",f.contains(r.id)).appendTo(e),a=$('<label for="'+r.id+"_Data"+u+'">'+r.text+' <span class="borgerDkItemClass">('+r.id+")<\/span><\/label>").appendTo(e);r.id!="byline..."&&(o=$('<a class="borgerDkItemTrigger" href="#">Vis dette indhold<\/a>').appendTo(e),c=$("<div/>").addClass("borgerDkItemContent").html(r.content?r.content:"").appendTo(e),o.click(function(){return v(o,c),!1}));s.contains(r.id)&&h.attr("checked",!0).attr("disabled",!0)}i++}}),i==0&&(e=$("<li/>").css("padding-left","10px").text("Den angivne artikel har ingen tilgængelige indholdstyper.").appendTo(t)),$("input:checkbox",r).change(function(){var n=[];$("input:checkbox",r).each(function(t,i){i.checked&&n.push(i.id.split("_")[0])});$(".borgerDkSelected",r).val(n.join(","))}),c.hide(),o.show()):(y.html(n.meta.error).show(),c.hide())}function w(){var t=e.val().split("?")[0];if(t!=e.val()){e.val(t);return}t!=h&&(n(t)&&p(t,!0),a.show(),c.show(),o.hide(),l.html(""),h=t)}var r=$(i),u=r.data("propertyid"),s=r.data("mandatory").split(","),b=r.data("types").split(","),k=r.data("municipalityid"),e=$(".borgerDkUrl",r),o=$(".borgerDkSummary",r),c=$(".borgerDkLoader",r),l=$(".borgerDkContent",r),y=$(".borgerDkErrors",r),a=$(".borgerDkExample",r),h=e.val().split("?")[0],f=$(".borgerDkSelected",r).val(),d;f=f?f.split(","):[];d=0;e.change(w);e.keyup(w);n(h)&&p(h)});$(".propertyItemContent>.borgerDkMicroArticles").each(function(t,i){function y(n,t){t.is(":visible")?(n.text("Vis dette indhold"),n.closest("li").removeClass("expanded"),t.slideUp(500)):(n.text("Skjul dette indhold"),n.closest("li").addClass("expanded"),t.slideDown(500))}function p(n,t){t=t===!1?!1:!0;h.show();c.html("");e.hide();a.hide();v.hide();$.getJSON("/base/BorgerDk/GetMicroArticles.aspx",{url:n,cache:t,municipalityId:u.municipalityId},function(t){b(t,o,n)})}function b(n){if(n.meta.code==200){$(".borgerDkArticleId",e).text(n.data.id);$(".borgerDkArticlePublished",e).text(n.data.published);$(".borgerDkArticleUpdated",e).text(n.data.modified);var t=$('<ul class="borgerDkContentList"/>').appendTo(c),i=$('<ul class="borgerDkContentList"/>').appendTo(l);$('<li class="borgerDkListHeader"><span>Vælg<\/span><span>Beskrivelse<\/span><\/li>').appendTo(t);$('<li class="borgerDkListHeader"><span>Vælg<\/span><span>Beskrivelse<\/span><\/li>').appendTo(i);u.allowBlocks||l.hide();$.each(n.data.elements,function(n,i){var r=$("<li/>").appendTo(t),o=$("<input/>",{id:i.id+"_Data"+u.propertyId,type:u.limit==1?"radio":"checkbox",name:"microArticles_"+u.propertyId}).attr("checked",s.contains(i.id)).appendTo(r),h=$('<label for="'+i.id+"_Data"+u.propertyId+'">'+i.text+' <span class="borgerDkItemClass">(mikroartikel)<\/span><\/label>').appendTo(r),f=$('<a class="borgerDkItemTrigger" href="#">Vis dette indhold<\/a>').appendTo(r),e=$("<div/>").addClass("borgerDkItemContent").html(i.content?i.content:"").appendTo(r);f.click(function(){return y(f,e),!1})});u.allowBlocks&&$.each(n.data.other,function(n,t){var r=$("<li/>").appendTo(i),o=$("<input/>",{id:t.id+"_Data"+u.propertyId,type:u.limit==1?"radio":"checkbox",name:"microArticles_"+u.propertyId}).attr("checked",s.contains(t.id)).appendTo(r),h=$('<label for="'+t.id+"_Data"+u.propertyId+'">'+t.text+' <span class="borgerDkItemClass">('+t.type+")<\/span><\/label>").appendTo(r),f=$('<a class="borgerDkItemTrigger" href="#">Vis dette indhold<\/a>').appendTo(r),e=$("<div/>").addClass("borgerDkItemContent").html(t.content?t.content:"").appendTo(r);f.click(function(){return y(f,e),!1})});$("input:checkbox,input:radio",r).change(function(){var n=[];$("input:checkbox,input:radio",r).each(function(t,i){i.checked&&n.push(i.id.split("_")[0])});$(".borgerDkSelected",r).val(n.join(","))});h.hide();e.show()}else a.html(n.meta.error).show(),h.hide()}function w(){var t=f.val().split("?")[0];if(t!=f.val()){f.val(t);return}t!=o&&(n(t)&&p(t,!0),v.show(),h.show(),e.hide(),c.html(""),o=t)}var r=$(i),u={propertyId:parseInt(r.attr("data-propertyid")),municipalityId:parseInt(r.attr("data-municipalityid")),limit:parseInt(r.attr("data-limit")),allowBlocks:r.attr("data-allow-blocks")=="true"},f=$(".borgerDkUrl",r),e=$(".borgerDkSummary",r),h=$(".borgerDkLoader",r),c=$(".borgerDkContent.borgerDkMicroArticles",r),l=$(".borgerDkContent.borgerDkBlocks",r),a=$(".borgerDkErrors",r),v=$(".borgerDkExample",r),o=f.val().split("?")[0],s=$(".borgerDkSelected",r).val();s=s?s.split(","):[];f.change(w);f.keyup(w);n(o)&&p(o)})});
//# sourceMappingURL=script.min.js.map
