function changeSelected(){document.getElementById("body_selectedfields").value="";var n=document.getElementById("body_fields").value.split(";");for(i=1;i<n.length;i++)document.getElementById("body_"+n[i]).checked&&(document.getElementById("body_selectedfields").value+=";"+n[i])}typeof Array.prototype.remove=="undefined"&&(Array.prototype.remove=function(n){for(var t=0;t<this.length;t++)this[t]==n&&this.splice(t,1)});typeof Array.prototype.contains=="undefined"&&(Array.prototype.contains=function(n){for(var t=0;t<this.length;t++)if(this[t]==n)return!0;return!1});$(document).ready(function(){$(".borgerDkPanel").each(function(n,t){function y(n){return(n?n+"":"").match(/^https:\/\/([a-z]+).borger.dk\//)!=null}function a(n,t){t.is(":visible")?(n.text("Vis dette indhold"),n.closest("li").removeClass("expanded"),t.slideUp(500)):(n.text("Skjul dette indhold"),n.closest("li").addClass("expanded"),t.slideDown(500))}function p(n,t){t=t===!1?!1:!0;h.show();c.html("");e.hide();v.hide();l.hide();$.getJSON("/base/BorgerDk/GetArticle.aspx",{url:n,cache:t,municipalityId:k},function(t){g(t,s,n)})}function g(n){var f,t,s;n.meta.code==200?($(".borgerDkArticleId",e).text(n.data.id),$(".borgerDkArticlePublished",e).text(n.data.published),$(".borgerDkArticleUpdated",e).text(n.data.modified),f=0,t=$('<ul class="borgerDkContentList"/>').appendTo(c),$('<li class="borgerDkListHeader"><span>Vælg<\/span><span>Beskrivelse<\/span><\/li>').appendTo(t),$.each(n.data.elements,function(n,i){var l,s,c;if(o.contains(i.type)||b.contains(i.type)){if(i.type=="title"){var e=$("<li/>").appendTo(t),h=$('<input id="'+i.id+"_Data"+r+'" type="checkbox" />').attr("checked",u.contains(i.id)).appendTo(e),v=$('<label for="'+i.id+"_Data"+r+'">'+i.content+' <span class="borgerDkItemClass">(overskrift)<\/span><\/label>').appendTo(e);o.contains(i.type)&&h.attr("checked",!0).attr("disabled",!0)}else if(i.type=="header"){var e=$("<li/>").appendTo(t),h=$('<input id="'+i.id+"_Data"+r+'" type="checkbox" />').attr("checked",u.contains(i.id)).appendTo(e),v=$('<label for="'+i.id+"_Data"+r+'">'+(i.content.length>50?i.content.substring(0,50)+"...":i.content)+' <span class="borgerDkItemClass">(manchet)<\/span><\/label>').appendTo(e),s=$('<a class="borgerDkItemTrigger" href="#">Vis dette indhold<\/a>').appendTo(e),c=$("<div/>").addClass("borgerDkItemContent").html(i.content?i.content:"").appendTo(e);s.click(function(){return a(s,c),!1});o.contains(i.type)&&h.attr("checked",!0).attr("disabled",!0)}else if(i.type=="kernetekst"){var e=$("<li/>").appendTo(t),h=$('<input id="'+i.id+"_Data"+r+'" type="checkbox" />').attr("checked",u.contains(i.id)).appendTo(e),v=$('<label for="'+i.id+"_Data"+r+'">'+i.text+"<\/label>").appendTo(e);$("input:checkbox",e).change(function(){var n=$(this).is(":checked");$("ul input:checkbox",e).attr("checked",n)});o.contains(i.type)&&h.attr("checked",!0).attr("disabled",!0);l=$('<ul class="borgerDkSubContentList"/>').appendTo(e);$.each(i.content,function(n,t){var f=$("<li/>").appendTo(l),h=$('<input id="microArticle-'+t.id+"_Data"+r+'" type="checkbox" />').attr("checked",u.contains(i.id)||u.contains("microArticle-"+t.id)).appendTo(f),s;$('<label for="microArticle-'+t.id+"_Data"+r+'">'+t.text+' <span class="borgerDkItemClass">(mikroartikel)<\/span><\/label>').appendTo(f);$("label",f).append('<a class="borgerDkItemTrigger" href="#">Vis dette indhold<\/a>');s=$("<div/>").addClass("borgerDkItemContent").html(t.content).appendTo(f);$("label a",f).click(function(){return a($(this),s),!1});o.contains(i.type)&&h.attr("checked",!0).attr("disabled",!0);$("input:checkbox",f).change(function(){var n=!0;$("ul input:checkbox",e).each(function(t,i){$(i).is(":checked")||(n=!1)});n||$(">input:checkbox",e).attr("checked",!1)})})}else{var e=$("<li/>").appendTo(t),h=$('<input id="'+i.id+"_Data"+r+'" type="checkbox" />').attr("checked",u.contains(i.id)).appendTo(e),v=$('<label for="'+i.id+"_Data"+r+'">'+i.text+' <span class="borgerDkItemClass">('+i.id+")<\/span><\/label>").appendTo(e);i.id!="byline..."&&(s=$('<a class="borgerDkItemTrigger" href="#">Vis dette indhold<\/a>').appendTo(e),c=$("<div/>").addClass("borgerDkItemContent").html(i.content?i.content:"").appendTo(e),s.click(function(){return a(s,c),!1}));o.contains(i.id)&&h.attr("checked",!0).attr("disabled",!0)}f++}}),f==0&&(s=$("<li/>").css("padding-left","10px").text("Den angivne artikel har ingen tilgængelige indholdstyper.").appendTo(t)),$("input:checkbox",i).change(function(){var n=[];$("input:checkbox",i).each(function(t,i){i.checked&&n.push(i.id.split("_")[0])});$(".borgerDkSelected",i).val(n.join(","))}),h.hide(),e.show()):(v.html(n.meta.error).show(),h.hide())}function w(){var n=f.val().split("?")[0];if(n!=f.val()){f.val(n);return}n!=s&&(y(n)&&p(n,!0),l.show(),h.show(),e.hide(),c.html(""),s=n)}var i=$(t),r=i.data("propertyid"),o=i.data("mandatory").split(","),b=i.data("types").split(","),k=i.data("municipalityid"),f=$(".borgerDkUrl",i),e=$(".borgerDkSummary",i),h=$(".borgerDkLoader",i),c=$(".borgerDkContent",i),v=$(".borgerDkErrors",i),l=$(".borgerDkExample",i),s=f.val().split("?")[0],u=$(".borgerDkSelected",i).val(),d;u=u?u.split(","):[];d=0;f.change(w);f.keyup(w);y(s)&&p(s)})});
//# sourceMappingURL=script.min.js.map
